{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  methods: {\n    formatPrice(price) {\n      return price.toLocaleString(\"vi-VN\");\n    },\n    //insert evaluation\n    async insertEvaluation() {\n      try {\n        const res = await axios.post(\"http://localhost:8087/api/evaluation\", this.formData);\n        if (res.status == 200) {\n          this.getCourse();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    //submit order course\n    async submitFormOrderCourse() {\n      try {\n        this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n        const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async data => {\n          if (data.status == 200) {\n            this.paymentData.orderID = data.data.data.id;\n            this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n            this.paymentData.paymentMethod = \"Smart Banking Online\";\n            await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n              this.orderData.status = \"Đăng ký thành công\";\n              await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async response => {\n                if (response.status == 200) {\n                  console.log(\"đăng ký thành công\");\n                }\n              });\n            });\n          }\n        });\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    //submit form evaluation\n    submitFormEvaluation() {\n      const inputElement = this.$refs.evaluationInput;\n      if (inputElement) {\n        this.formData.courseID = inputElement.id;\n        this.insertEvaluation();\n      }\n    },\n    //change more or less evaluate\n    changeShowEvaluate() {\n      this.showMoreEvaluate = !this.showMoreEvaluate;\n      if (this.showMoreEvaluate == false) {\n        this.itemsPerPage = 5;\n      } else {\n        this.itemsPerPage = this.course.courseEvaluations.length;\n      }\n    },\n    //click subImage in page detail change main Image\n    changeImage(newImageUrl) {\n      this.course.urlImage = newImageUrl;\n    }\n  },\n  computed: {\n    displayedEvaluations() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.course.courseEvaluations.slice(start, end);\n    },\n    pages() {\n      return Math.ceil(this.course.courseEvaluations.length / this.itemsPerPage);\n    }\n  },\n  data() {\n    return {\n      showMoreEvaluate: false,\n      currentPage: 1,\n      itemsPerPage: 5,\n      orderData: {\n        userID: 1,\n        courseID: 0,\n        status: \"Đang xử lý\"\n      },\n      paymentData: {\n        orderID: 0,\n        totalPrice: 0,\n        paymentMethod: \"\"\n      }\n    };\n  },\n  watch: {},\n  name: \"DetailCourse\",\n  components: {}\n};","map":{"version":3,"names":["axios","methods","formatPrice","price","toLocaleString","insertEvaluation","res","post","formData","status","getCourse","error","console","log","submitFormOrderCourse","course","id","orderData","courseID","then","data","paymentData","orderID","totalPrice","paymentMethod","put","response","submitFormEvaluation","inputElement","$refs","evaluationInput","changeShowEvaluate","showMoreEvaluate","itemsPerPage","courseEvaluations","length","changeImage","newImageUrl","urlImage","computed","displayedEvaluations","start","currentPage","end","slice","pages","Math","ceil","userID","watch","name","components"],"sources":["C:\\Vuejs\\Elearning\\src\\components\\client\\DetailCourseScreen.vue"],"sourcesContent":["<template>\n  <div v-if=\"course\" class=\"max-w-screen-lg m-auto px-3 my-10 flex flex-col gap-7\">\n    <div class=\"w-full\">\n      <div class=\"rounded-lg flex flex-col gap-3\">\n        <div class=\"w-detail\">\n          <h1 class=\"text-gray-700 font-semibold text-xl\">{{ course.title }}</h1>\n\n          <div class=\"flex justify-between gap-3 mt-2\">\n            <p class=\"text-gray-400\">\n              <i class=\"fa-regular fa-clock\"></i>{{ course.createdAt }}\n            </p>\n            <p class=\"text-gray-400\">\n              Tác giả: <label for=\"\" class=\"font-semibold text-black\">EvonDev</label>\n            </p>\n          </div>\n        </div>\n\n        <div class=\"w-full flex justify-between gap-10\">\n          <div class=\"flex flex-col w-2/3 gap-2 bg-white rounded-xl shadow-md overflow-hidden\">\n            <img\n              class=\"object-cover h-80 flex-shrink-0\"\n              :src=\"course.urlImage\"\n              alt=\"\"\n            />\n            <div class=\"flex pb-2 justify-left mt-auto flex-1 cursor-pointer\">\n              <img\n                @click=\"changeImage(image.urlImage)\"\n                v-for=\"image in course.courseImages\"\n                :key=\"image.id\"\n                class=\"w-24 h-24 rounded-xl object-cover hover:opacity-70 border shadow-sm\"\n                :src=\"image.urlImage\"\n                alt=\"\"\n              />\n            </div>\n          </div>\n\n          <div class=\"w-1/3 bg-white shadow-md border border-gray-200 rounded-lg p-5\">\n            <div  class=\"w-full flex justify-between \">\n              <h3 class=\"line-through text-gray-400 font-semibold\">{{ formatPrice(course.price - (course.price * (course.reduce / 100))) }}đ</h3>\n              <p  class=\"bg-red-800 py-1 rounded-lg px-2 text-white text-sm text-center\">\n                Giảm giá {{course.reduce}}%\n              </p>\n            </div>\n            <h1 class=\"font-semibold text-xl text-red-600\">\n              {{ formatPrice(course.price) }}đ\n            </h1>\n\n\n            <div action=\"\" class=\"flex flex-col gap-5 mt-5\" >\n              <div class=\"flex flex-col gap-3 text-sm\">\n                <p>Xin chào: <span class=\"font-semibold\">Nguyễn Quốc Anh</span></p>\n                <p>Cảm ơn bạn đã quan tâm khóa học này!</p>\n                <p>Cam kết đảm bảo chất lượng đầu ra khi bạn hoàn thành khóa học.</p>\n                <p>Nhấn vào nút <span class=\"font-semibold\">\"ĐĂNG KÝ\"</span> để tham gia khóa học</p>\n              </div>\n              <a\n                :href=\"'/payment/' + course.id\"\n                class=\"bg-gray-700 text-white text-center font-medium rounded-lg py-3  cursor-pointer hover:opacity-70\">\n                ĐĂNG KÝ\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"flex gap-10 w-full bg-white rounded-lg p-5 shadow-md\">\n      <div class=\"w-2/3\">\n        <p class=\"text-sm leading-7 text-slate-600\">{{ course.description }}</p>\n      </div>\n      <div class=\"1/3 mx-auto\">\n        <img\n          class=\"rounded-full w-full h-36 object-cover\"\n          src=\"https://static.kt.city/e0ebee87-aefb-40bf-96a3-9a53986dfc17.jpg\"\n          alt=\"\"\n        />\n      </div>\n    </div>\n\n    <div class=\"bg-white rounded-lg p-5 mt-5 shadow-md\">\n      <h1 class=\"font-semibold text-xl\">\n        <i class=\"fa-solid fa-book pr-2\"></i>NỘI DUNG BÀI HỌC\n      </h1>\n\n      <div class=\"mt-3 flex flex-col gap-5\">\n        <div v-for=\"thematic in course.thematicCourses\" :key=\"thematic.id\">\n          <h1 class=\"bg-slate-600 text-white py-2 px-2\">{{ thematic.name }}</h1>\n\n          <div v-for=\"video in thematic.videoCourses\" :key=\"video.id\" class=\"flex justify-between mt-4 mx-4\">\n            <p class=\"text-gray-600\">\n              <i class=\"fa-regular fa-circle-play pr-2\"></i>{{ video.name }}\n            </p>\n            <p class=\"text-gray-600\">{{ video.duration }}</p>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <div class=\"bg-white rounded-lg p-5 mt-5 shadow-md\">\n        <h1 class=\"font-semibold text-xl\">\n          <i class=\"fa-regular fa-comments pr-2\"></i>ĐÁNH GIÁ KHÓA HỌC\n        </h1>\n\n        <form class=\"mt-3\" @submit.prevent=\"submitFormEvaluation\">\n          <div class=\"w-full flex gap-3\">\n\n            <input\n              v-model=\"formData.comment\" \n              name=\"evaluation\"\n              required\n              type=\"text\"\n              class=\"border-b-slate-200 border-b px-2 bg-transparent w-full outline-none\"\n              placeholder=\"Đánh giá khóa học...\"\n            />\n            \n            <input\n              v-model=\"formData.rate\" \n              :id=\"course.id\"\n              ref=\"evaluationInput\"\n              required\n              type=\"number\"\n              min=\"1\"\n              max=\"10\"\n              class=\"border-b-slate-200 border-b px-2 bg-transparent w-full outline-none\"\n              placeholder=\"Điểm: 1/10\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Bình luận\"\n              class=\"hover:opacity-70 cursor-pointer bg-slate-700 text-white rounded-lg px-3 py-2 text-sm\"\n            />\n          </div>\n        </form>\n\n        <div class=\"flex flex-col gap-5 mt-5\">\n          <div class=\"flex gap-3 border-b-slate-200 border-b w-full pb-3 last:border-b-0\" v-for=\"(evaluation) in displayedEvaluations\" :key=\"evaluation.id\">\n            <div>\n              <img\n                class=\"w-10 h-10 rounded-full object-cover\"\n                src=\"https://musicart.xboxlive.com/7/4d4d6500-0000-0000-0000-000000000002/504/image.jpg?w=1920&h=1080\"\n                alt=\"\"\n              />\n            </div>\n\n            <div class=\"flex flex-col gap-1\">\n              <p class=\"font-semibold text-sm\">Nguyễn quốc anh</p>\n              <p class=\"text-sm text-gray-400 text-sm\">\n                <i class=\"fa-regular fa-clock pr-2\"></i>{{ evaluation.createdAt }}\n              </p>\n              <p class=\"bg-transparent w-full outline-none text-sm text-slate-600\">\n                {{ evaluation.comment }}\n              </p>\n            </div>\n          </div>\n\n          <button @click=\"changeShowEvaluate\" v-if=\"!showMoreEvaluate && course.courseEvaluations.length > 5\" class=\"bg-slate-700 text-white w-28 py-2 rounded-lg mx-auto hover:opacity-70\">Xem thêm</button>\n          <button @click=\"changeShowEvaluate\" v-if=\"showMoreEvaluate && course.courseEvaluations.length > 5\" class=\"bg-slate-700 text-white w-28 py-2 rounded-lg mx-auto hover:opacity-70\">Thu gọn</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <p v-else>Loading...</p>\n</template>\n\n<script>\n  import axios from \"axios\";\n\n  export default {\n  \n    methods: {\n      formatPrice(price) {\n        return price.toLocaleString(\"vi-VN\");\n      },\n      \n      //insert evaluation\n      async insertEvaluation() {\n        try\n        {\n          const res = await axios.post(\"http://localhost:8087/api/evaluation\", this.formData);\n          \n          if(res.status == 200)\n          {\n            this.getCourse();\n          }\n          \n        } catch (error) {\n          console.log(error);\n        }\n      },\n\n      //submit order course\n      async submitFormOrderCourse(){\n        try{\n          this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n\n            \n          const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async (data) => {\n            if(data.status == 200)\n            {\n              this.paymentData.orderID = data.data.data.id;\n              this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n              this.paymentData.paymentMethod = \"Smart Banking Online\";\n                \n              await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n                this.orderData.status = \"Đăng ký thành công\";\n\n                await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async (response) => {\n                  if(response.status == 200)\n                  {\n                    console.log(\"đăng ký thành công\")\n\n                  }\n                })\n              })\n            }\n          });\n          return res;\n        } catch (error){\n          console.log(error);\n        }\n      },\n\n      //submit form evaluation\n      submitFormEvaluation(){\n        const inputElement = this.$refs.evaluationInput;\n        if (inputElement) {\n          this.formData.courseID = inputElement.id;\n\n          this.insertEvaluation();\n        }\n      },\n      \n      //change more or less evaluate\n      changeShowEvaluate(){\n        this.showMoreEvaluate = !this.showMoreEvaluate;\n\n        if(this.showMoreEvaluate == false)\n        {\n          this.itemsPerPage = 5;\n        }\n        else\n        {\n          this.itemsPerPage = this.course.courseEvaluations.length;\n        }\n      },\n\n      //click subImage in page detail change main Image\n      changeImage(newImageUrl) {\n        this.course.urlImage = newImageUrl;\n      },\n    },\n    computed: {\n      displayedEvaluations() {\n        const start = (this.currentPage - 1) * this.itemsPerPage;\n        const end = start + this.itemsPerPage;\n        return this.course.courseEvaluations.slice(start, end);\n      },\n      pages() {\n        return Math.ceil(this.course.courseEvaluations.length / this.itemsPerPage);\n      },\n    },\n    data() {\n      return {\n  \n        showMoreEvaluate: false,\n        currentPage: 1,\n        itemsPerPage: 5,\n        orderData: {\n          userID: 1,\n          courseID: 0,\n          status: \"Đang xử lý\"\n        },\n        paymentData: {\n          orderID: 0,\n          totalPrice: 0,\n          paymentMethod: \"\",\n        }\n      };\n    },\n    watch: {},\n    name: \"DetailCourse\",\n    components: {},\n  };\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}