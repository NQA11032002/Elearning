{"ast":null,"code":"import SidebarteacherScreen from './SidebarteacherScreen.vue';\nimport axios from \"axios\";\nimport { ref, useRoute } from 'vue';\nexport default {\n  setup() {\n    const route = useRoute();\n    const selectedFile = ref(null);\n    const uploadLesson = async () => {\n      try {\n        if (selectedFile.value != null) {\n          const formData = new FormData();\n          formData.append('file', selectedFile.value);\n          const response = await axios.post(\"http://localhost:8087/api/upload\", formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          if (response.status === 200) {\n            const res = response.data.data;\n            lesson.value.duration = res.duration;\n            lesson.value.urlVideo = res.url;\n\n            // get thematic id from url\n            const thematicID = route.params.id;\n            lesson.value.thematicID = thematicID;\n            console.log(lesson.value);\n          }\n        }\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      }\n    };\n    return {\n      selectedFile,\n      uploadLesson\n    };\n  },\n  components: {\n    SidebarteacherScreen\n  },\n  data() {\n    return {\n      lesson: {\n        name: \"\",\n        thematicID: 0,\n        urlVideo: \"\",\n        duration: \"\"\n      }\n    };\n  },\n  methods: {\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["SidebarteacherScreen","axios","ref","useRoute","setup","route","selectedFile","uploadLesson","value","formData","FormData","append","response","post","headers","status","res","data","lesson","duration","urlVideo","url","thematicID","params","id","console","log","error","components","name","methods","handleFileChange","event","inputFile","target","files","length"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\Professional\\CourseVideoScreen.vue"],"sourcesContent":["<template>\n    <div class=\"w-2/3 m-auto max-sm:w-full max-sm:px-5 sm:px-3 lg:px-0 mt-14\">\n        <div class=\"w-full flex my-5 max-sm:flex-col\">\n            <sidebarteacher-screen></sidebarteacher-screen>\n            <div class=\"ml-6 w-4/5 max-sm:mt-4 bg-white max-sm:ml-0 shadow-md \">\n                <div class=\"p-4\">\n                    <p class=\"text-3xl font-semibold flex justify-center text-blue-900\">Thông tin chuyên đề</p>\n                </div>\n                <div class=\"flex justify-between max-sm:flex-col\">\n                    <form @submit.prevent=\"uploadLesson\" class=\"w-full flex flex-col justify-center max-sm:w-full max-sm:p-2\" style=\"margin-left: 50%; transform: translateX(-50%);\">\n                        <!-- <span class=\"py-2 font-semibold\">Mã khóa học:</span>\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\n    \n                        <span class=\"py-2 font-semibold\">Mã chuyên đề:</span>\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\n         -->\n                        <span class=\"py-2 font-semibold\">Tên bài giảng: (Số lượng bài giảng được phép <span class=\"text-red-600\">2</span> )</span>\n                        <input v-model=\"lesson.name\" class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Tên chuyên đề:\">\n                        \n    \n                        <span class=\"py-2 font-semibold\">Chọn video giảng:</span>\n                        <div class=\"relative h-8 border border-blue-900 w-full rounded max-sm:w-full\">\n                            <label class=\"absolute flex right-0 items-center pr-1 h-full w-full\" for=\"filevideocourse\">\n                                <p class=\"text-left w-full pl-2 text-gray-400\">{{ selectedFile.value }}</p>\n                                <i class=\"fa-regular fa-folder-open cursor-pointer text-blue-900\"></i>\n                                <input @change=\"handleFileChange\" class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full hidden\" type=\"file\" id=\"filevideocourse\" placeholder=\"Bài giảng\">\n                            </label>\n                        </div>\n                        \n                        <div class=\"flex justify-end w-full my-4 max-sm:w-full\">\n                            <button class=\"bg-gray-400  text-white p-2 w-1/5 mr-4 rounded text-sm max-sm:mr-2\">Hủy</button>\n                            <button class=\"bg-blue-900 text-white p-2 w-2/5 rounded text-sm max-sm:mr-0\">Lưu bài giảng</button>\n                        </div>\n                    </form>\n                </div>\n                \n            </div>\n            \n        </div>\n    </div>\n    \n</template>\n<script>\nimport SidebarteacherScreen from './SidebarteacherScreen.vue';\nimport axios from \"axios\";\nimport { ref, useRoute } from 'vue';\n\n\nexport default {\n  setup() {\n    const route = useRoute();\n    const selectedFile = ref(null);\n\n    const uploadLesson = async () => {\n      try {\n        if (selectedFile.value != null) {\n          const formData = new FormData();\n          formData.append('file', selectedFile.value);\n\n          const response = await axios.post(\"http://localhost:8087/api/upload\", formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          });\n\n          if (response.status === 200) {\n            const res = response.data.data;\n            lesson.value.duration = res.duration;\n            lesson.value.urlVideo = res.url;\n\n            // get thematic id from url\n            const thematicID = route.params.id;\n\n            lesson.value.thematicID = thematicID;\n            console.log(lesson.value);\n          }\n        }\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      }\n    };\n\n    return {\n      selectedFile,\n      uploadLesson,\n    };\n  },\n    components: {\n        SidebarteacherScreen,\n    },\n    data() {\n      return {\n        lesson:{\n          name : \"\",\n          thematicID : 0,\n          urlVideo : \"\",\n          duration : \"\"\n        }\n      };\n    },\n    methods: {\n      handleFileChange(event) {\n        const inputFile = event.target;\n        if (inputFile.files.length > 0) {\n          // Lấy tên của tệp đầu tiên nếu có\n          this.selectedFile = event.target.files[0];\n        } else {\n          this.selectedFile = \"Chưa chọn tệp\";\n        }\n      },\n  },\n};\n\n</script>\n"],"mappings":"AA2CA,OAAOA,oBAAmB,MAAO,4BAA4B;AAC7D,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,GAAG,EAAEC,QAAO,QAAS,KAAK;AAGnC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIF,QAAQ,CAAC,CAAC;IACxB,MAAMG,YAAW,GAAIJ,GAAG,CAAC,IAAI,CAAC;IAE9B,MAAMK,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,IAAID,YAAY,CAACE,KAAI,IAAK,IAAI,EAAE;UAC9B,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;UAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEL,YAAY,CAACE,KAAK,CAAC;UAE3C,MAAMI,QAAO,GAAI,MAAMX,KAAK,CAACY,IAAI,CAAC,kCAAkC,EAAEJ,QAAQ,EAAE;YAC9EK,OAAO,EAAE;cACP,cAAc,EAAE;YAClB;UACF,CAAC,CAAC;UAEF,IAAIF,QAAQ,CAACG,MAAK,KAAM,GAAG,EAAE;YAC3B,MAAMC,GAAE,GAAIJ,QAAQ,CAACK,IAAI,CAACA,IAAI;YAC9BC,MAAM,CAACV,KAAK,CAACW,QAAO,GAAIH,GAAG,CAACG,QAAQ;YACpCD,MAAM,CAACV,KAAK,CAACY,QAAO,GAAIJ,GAAG,CAACK,GAAG;;YAE/B;YACA,MAAMC,UAAS,GAAIjB,KAAK,CAACkB,MAAM,CAACC,EAAE;YAElCN,MAAM,CAACV,KAAK,CAACc,UAAS,GAAIA,UAAU;YACpCG,OAAO,CAACC,GAAG,CAACR,MAAM,CAACV,KAAK,CAAC;UAC3B;QACF;MACF,EAAE,OAAOmB,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IAED,OAAO;MACLrB,YAAY;MACZC;IACF,CAAC;EACH,CAAC;EACCqB,UAAU,EAAE;IACR5B;EACJ,CAAC;EACDiB,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAC;QACLW,IAAG,EAAI,EAAE;QACTP,UAAS,EAAI,CAAC;QACdF,QAAO,EAAI,EAAE;QACbD,QAAO,EAAI;MACb;IACF,CAAC;EACH,CAAC;EACDW,OAAO,EAAE;IACPC,gBAAgBA,CAACC,KAAK,EAAE;MACtB,MAAMC,SAAQ,GAAID,KAAK,CAACE,MAAM;MAC9B,IAAID,SAAS,CAACE,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;QAC9B;QACA,IAAI,CAAC9B,YAAW,GAAI0B,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC3C,OAAO;QACL,IAAI,CAAC7B,YAAW,GAAI,eAAe;MACrC;IACF;EACJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}