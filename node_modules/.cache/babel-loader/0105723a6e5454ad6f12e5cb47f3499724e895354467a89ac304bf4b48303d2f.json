{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"text-slate-600 flex lg:w-2/3 my-28 mx-auto gap-6 h-full py-5 max-sm:flex-col max-sm:w-full max-sm:px-5 md:w-10/12\"\n};\nconst _hoisted_2 = {\n  class: \"border-r lg:w-1/3 border-slate-700 flex flex-col gap-5 pr-5 max-sm:flex-col max-sm:w-full max-sm:pr-0 max-sm:border-r-0\"\n};\nconst _hoisted_3 = {\n  class: \"border-b border-slate-700 pb-4\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"text-xl font-semibold text-slate-700 max-sm:text-lg max-sm:text-center\"\n}, \" Đang chờ thanh toán \", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"text-center text-2xl font-medium mt-3 text-slate-700\"\n};\nconst _hoisted_6 = {\n  class: \"border-b border-slate-700 pb-4 flex flex-col gap-3\"\n};\nconst _hoisted_7 = {\n  class: \"font-medium text-slate-700\"\n};\nconst _hoisted_8 = {\n  for: \"\",\n  class: \"pl-1 text-orange-400 font-medium\"\n};\nconst _hoisted_9 = {\n  class: \"font-medium text-slate-700\"\n};\nconst _hoisted_10 = {\n  class: \"pl-1 text-orange-400 font-medium\",\n  for: \"\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"flex border-b border-slate-700 pb-4\\\"><input type=\\\"text\\\" class=\\\"rounded-md py-2 px-4 w-full text-sm bg-slate-600 outline-none text-gray-100\\\" placeholder=\\\"Nhập mã khuyến mãi\\\"><button class=\\\"border rounded-md text-sm text-gray-300 ml-3 text-center outline-none bg-neutral-800 border-slate-500 w-44 cursor-pointer\\\"> ÁP DỤNG </button></div><div><h1 class=\\\"text-xl font-semibold text-slate-700 mb-2 max-sm:text-lg\\\"> Chi tiết thanh toán </h1><div class=\\\"bg-neutral-800 p-3 rounded-lg py-5 shadow-lg\\\"><div class=\\\"flex justify-between border-b border-slate-700 pb-5\\\"><p class=\\\"flex-shrink-0 font-medium text-gray-300\\\">Giá bán:</p><div class=\\\"flex-1 flex justify-end gap-3\\\"><p class=\\\"text-sm line-through text-gray-300\\\">2.500.000đ</p><p class=\\\"text-sky-300\\\">1.299.00đ</p></div></div><div class=\\\"flex justify-between pt-5\\\"><p class=\\\"font-medium text-gray-300\\\">Tổng tiền:</p><h3 class=\\\"text-xl text-sky-300\\\">1.299.000đ</h3></div></div></div>\", 2);\nconst _hoisted_13 = /*#__PURE__*/_createStaticVNode(\"<div><div class=\\\"flex flex-col gap-5\\\"><div><h1 class=\\\"text-xl font-semibold text-slate-700 max-sm:text-lg\\\"> Chuyển khoản bằng QR </h1><div class=\\\"flex items-center justify-center gap-5 max-sm:flex-col max-sm:gap-0\\\"><img class=\\\"w-36 h-36 object-cover rounded-lg my-4\\\" src=\\\"https://i.vdoc.vn/data/image/2017/11/23/cach-tao-ma-qr-code.png\\\" alt=\\\"\\\"><div class=\\\"flex flex-col gap-3\\\"><p class=\\\"text-sm\\\">Bước 1: Mở app ngân hàng và quét mã QR</p><p class=\\\"text-sm\\\"> Bước 2: Đảm bảo nội dung chuyển khoản là <label for=\\\"\\\" class=\\\"text-orange-400\\\">F8C1X29L</label></p><p class=\\\"text-sm\\\">Bước 3: Thực hiện thanh toán.</p></div></div></div><div class=\\\"\\\"><h1 class=\\\"text-xl font-semibold text-slate-700 max-sm:text-lg\\\"> Chuyển khoản thủ công </h1><div class=\\\"flex flex-wrap gap-5 w-full mt-3\\\"><div class=\\\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\\\"><p class=\\\"text-gray-400 text-sm\\\">Số tài khoản</p><div class=\\\"flex justify-between items-center mt-2\\\"><p class=\\\"text-gray-200\\\">9353538222</p><img class=\\\"cursor-grab hover:opacity-80\\\" src=\\\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\\\" alt=\\\"\\\"></div></div><div class=\\\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\\\"><p class=\\\"text-sm text-gray-400\\\">Tên tài khoản</p><div class=\\\"mt-2\\\"><h1 class=\\\"font-medium text-gray-200\\\">ĐẶNG NGỌC SƠN</h1></div></div><div class=\\\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\\\"><p class=\\\"text-sm text-gray-400\\\">Nội dung</p><div class=\\\"flex justify-between items-center mt-2\\\"><p class=\\\"text-orange-400\\\">F8C1X29L</p><img class=\\\"cursor-grab hover:opacity-80\\\" src=\\\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\\\" alt=\\\"\\\"></div></div><div class=\\\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\\\"><p class=\\\"text-sm text-gray-400\\\">Chi nhánh</p><div class=\\\"mt-2\\\"><p class=\\\"text-gray-200\\\">Vietcombank Hà Nội</p></div></div></div></div><div class=\\\"flex flex-col gap-3\\\"><h1 class=\\\"text-xl font-medium\\\">Lưu ý</h1><p class=\\\"text-sm\\\"> Tối đa 5 phút sau thời gian chuyển khoản, nếu hệ thống không phản hồi vui lòng liên hệ ngay bộ phận hỗ trợ của F8. </p><div class=\\\"flex items-center gap-2\\\"><img src=\\\"https://fullstack.edu.vn/static/media/phone.0c60754adb11aa1f42791f4b80423f6d.svg\\\" alt=\\\"\\\"><p class=\\\"text-sm\\\">0246.329.1102</p></div><div class=\\\"flex items-center gap-2\\\"><img src=\\\"\\thttps://fullstack.edu.vn/static/media/envelope.e7b59ce57be76a9435865a20e7021f56.svg\\\" alt=\\\"\\\"><p class=\\\"text-sm\\\">contact@fullstack.edu.vn</p></div><div class=\\\"flex items-center gap-2\\\"><img src=\\\"https://fullstack.edu.vn/static/media/map-location.d448ea4630d95df7331a9b1162a39a8f.svg\\\" alt=\\\"\\\"><p class=\\\"text-sm\\\"> Số 11D, lô A10, khu đô thị Nam Trung Yên, Phường Yên Hòa, Quận Cầu Giấy, TP. Hà Nội </p></div></div></div></div>\", 1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PopupScreen = _resolveComponent(\"PopupScreen\");\n  return $setup.course != null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.isPopup ? (_openBlock(), _createBlock(_component_PopupScreen, {\n    key: 0,\n    contents: $data.contents\n  }, null, 8 /* PROPS */, [\"contents\"])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"p\", _hoisted_5, _toDisplayString($data.countdown), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"p\", _hoisted_7, [_createTextVNode(\" Tên khóa học: \"), _createElementVNode(\"label\", _hoisted_8, _toDisplayString($setup.course.title), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_9, [_createTextVNode(\" Mã đơn hàng: \"), _createElementVNode(\"label\", _hoisted_10, _toDisplayString(_ctx.codeOrder), 1 /* TEXT */)])]), _hoisted_11]), _hoisted_13])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["class","_createElementVNode","for","$setup","course","_createElementBlock","_hoisted_1","$data","isPopup","_createBlock","_component_PopupScreen","contents","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","countdown","_hoisted_6","_hoisted_7","_hoisted_8","title","_hoisted_9","_hoisted_10","_ctx","codeOrder","_hoisted_11","_hoisted_13"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\PaymentScreen.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"course != null\"\n    class=\"text-slate-600 flex lg:w-2/3 my-28 mx-auto gap-6 h-full py-5 max-sm:flex-col max-sm:w-full max-sm:px-5 md:w-10/12\"\n  >\n    <PopupScreen v-if=\"isPopup\" :contents=\"contents\"></PopupScreen>\n\n    <div\n      class=\"border-r lg:w-1/3 border-slate-700 flex flex-col gap-5 pr-5 max-sm:flex-col max-sm:w-full max-sm:pr-0 max-sm:border-r-0\"\n    >\n      <div class=\"border-b border-slate-700 pb-4\">\n        <h3\n          class=\"text-xl font-semibold text-slate-700 max-sm:text-lg max-sm:text-center\"\n        >\n          Đang chờ thanh toán\n        </h3>\n        <p class=\"text-center text-2xl font-medium mt-3 text-slate-700\">\n          {{ countdown }}\n        </p>\n      </div>\n\n      <div class=\"border-b border-slate-700 pb-4 flex flex-col gap-3\">\n        <p class=\"font-medium text-slate-700\">\n          Tên khóa học:\n          <label for=\"\" class=\"pl-1 text-orange-400 font-medium\">{{\n            course.title\n          }}</label>\n        </p>\n        <p class=\"font-medium text-slate-700\">\n          Mã đơn hàng:\n          <label class=\"pl-1 text-orange-400 font-medium\" for=\"\">{{\n            codeOrder\n          }}</label>\n        </p>\n      </div>\n\n      <div class=\"flex border-b border-slate-700 pb-4\">\n        <input\n          type=\"text\"\n          class=\"rounded-md py-2 px-4 w-full text-sm bg-slate-600 outline-none text-gray-100\"\n          placeholder=\"Nhập mã khuyến mãi\"\n        />\n\n        <button\n          class=\"border rounded-md text-sm text-gray-300 ml-3 text-center outline-none bg-neutral-800 border-slate-500 w-44 cursor-pointer\"\n        >\n          ÁP DỤNG\n        </button>\n      </div>\n\n      <div>\n        <h1 class=\"text-xl font-semibold text-slate-700 mb-2 max-sm:text-lg\">\n          Chi tiết thanh toán\n        </h1>\n\n        <div class=\"bg-neutral-800 p-3 rounded-lg py-5 shadow-lg\">\n          <div class=\"flex justify-between border-b border-slate-700 pb-5\">\n            <p class=\"flex-shrink-0 font-medium text-gray-300\">Giá bán:</p>\n            <div class=\"flex-1 flex justify-end gap-3\">\n              <p class=\"text-sm line-through text-gray-300\">2.500.000đ</p>\n              <p class=\"text-sky-300\">1.299.00đ</p>\n            </div>\n          </div>\n\n          <div class=\"flex justify-between pt-5\">\n            <p class=\"font-medium text-gray-300\">Tổng tiền:</p>\n            <h3 class=\"text-xl text-sky-300\">1.299.000đ</h3>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <div class=\"flex flex-col gap-5\">\n        <div>\n          <h1 class=\"text-xl font-semibold text-slate-700 max-sm:text-lg\">\n            Chuyển khoản bằng QR\n          </h1>\n          <div\n            class=\"flex items-center justify-center gap-5 max-sm:flex-col max-sm:gap-0\"\n          >\n            <img\n              class=\"w-36 h-36 object-cover rounded-lg my-4\"\n              src=\"https://i.vdoc.vn/data/image/2017/11/23/cach-tao-ma-qr-code.png\"\n              alt=\"\"\n            />\n\n            <div class=\"flex flex-col gap-3\">\n              <p class=\"text-sm\">Bước 1: Mở app ngân hàng và quét mã QR</p>\n              <p class=\"text-sm\">\n                Bước 2: Đảm bảo nội dung chuyển khoản là\n                <label for=\"\" class=\"text-orange-400\">F8C1X29L</label>\n              </p>\n              <p class=\"text-sm\">Bước 3: Thực hiện thanh toán.</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"\">\n          <h1 class=\"text-xl font-semibold text-slate-700 max-sm:text-lg\">\n            Chuyển khoản thủ công\n          </h1>\n          <div class=\"flex flex-wrap gap-5 w-full mt-3\">\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-gray-400 text-sm\">Số tài khoản</p>\n              <div class=\"flex justify-between items-center mt-2\">\n                <p class=\"text-gray-200\">9353538222</p>\n                <img\n                  class=\"cursor-grab hover:opacity-80\"\n                  src=\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\"\n                  alt=\"\"\n                />\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Tên tài khoản</p>\n              <div class=\"mt-2\">\n                <h1 class=\"font-medium text-gray-200\">ĐẶNG NGỌC SƠN</h1>\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Nội dung</p>\n              <div class=\"flex justify-between items-center mt-2\">\n                <p class=\"text-orange-400\">F8C1X29L</p>\n                <img\n                  class=\"cursor-grab hover:opacity-80\"\n                  src=\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\"\n                  alt=\"\"\n                />\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Chi nhánh</p>\n              <div class=\"mt-2\">\n                <p class=\"text-gray-200\">Vietcombank Hà Nội</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"flex flex-col gap-3\">\n          <h1 class=\"text-xl font-medium\">Lưu ý</h1>\n          <p class=\"text-sm\">\n            Tối đa 5 phút sau thời gian chuyển khoản, nếu hệ thống không phản\n            hồi vui lòng liên hệ ngay bộ phận hỗ trợ của F8.\n          </p>\n\n          <div class=\"flex items-center gap-2\">\n            <img\n              src=\"https://fullstack.edu.vn/static/media/phone.0c60754adb11aa1f42791f4b80423f6d.svg\"\n              alt=\"\"\n            />\n            <p class=\"text-sm\">0246.329.1102</p>\n          </div>\n\n          <div class=\"flex items-center gap-2\">\n            <img\n              src=\"\thttps://fullstack.edu.vn/static/media/envelope.e7b59ce57be76a9435865a20e7021f56.svg\"\n              alt=\"\"\n            />\n            <p class=\"text-sm\">contact@fullstack.edu.vn</p>\n          </div>\n\n          <div class=\"flex items-center gap-2\">\n            <img\n              src=\"https://fullstack.edu.vn/static/media/map-location.d448ea4630d95df7331a9b1162a39a8f.svg\"\n              alt=\"\"\n            />\n            <p class=\"text-sm\">\n              Số 11D, lô A10, khu đô thị Nam Trung Yên, Phường Yên Hòa, Quận Cầu\n              Giấy, TP. Hà Nội\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRoute } from \"vue-router\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport PopupScreen from \"./common/PopupScreen.vue\";\n// import router from \"../../router\";\n\nexport default {\n  created() {\n    // // Track the previous route when the component is created\n    // router.beforeEach((to, from, next) => {\n    //   this.previousRoute = from;\n    //   next();\n    // });\n    // // Thêm sự kiện beforeunload khi component được tạo\n    // window.addEventListener(\"beforeunload\", this.handleBeforeUnload);\n    // router.afterEach((to, from) => {\n    //   const previousPath = from ? from.path : null;\n    //   console.log(\"Previous path:\", previousPath);\n    // });\n  },\n  mounted() {\n    // Convert initial time to seconds\n    let timeInSeconds = this.convertTimeToSeconds(this.countdown);\n\n    // Update the countdown every second\n    this.interval = setInterval(() => {\n      if (timeInSeconds > 0) {\n        timeInSeconds--;\n        this.countdown = this.convertSecondsToTime(timeInSeconds);\n\n        this.isPopup = false;\n      } else {\n        // Countdown reached zero, you can perform additional actions here\n        clearInterval(this.interval);\n        this.isPopup = true;\n\n        // Change contents in the child component\n        this.contents.title = \"Hết thời hạn thanh toán, vui lòng thử lại.!\";\n      }\n    }, 1000);\n\n    //create code order\n    const generateCode = () => {\n      this.codeOrder = Math.random().toString(36).substring(2, 10);\n\n      return this.codeOrder;\n    };\n\n    generateCode();\n  },\n  setup() {\n    const course = ref();\n    const route = useRoute();\n    const courseId = route.params.id;\n\n    const getCourse = async () => {\n      try {\n        const res = await axios.get(\n          \"http://localhost:8087/api/course/\" + courseId\n        );\n\n        course.value = res.data.data;\n\n        if (course.value.courseImages.length > 0) {\n          course.value.urlImage = course.value.courseImages[0].urlImage;\n        }\n        console.log(course.value);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getCourse();\n\n    return {\n      course,\n      getCourse,\n    };\n  },\n  methods: {\n    handleBeforeUnload() {\n      // this.$router.push(\"/new-route\");\n    },\n    convertTimeToSeconds(time) {\n      const [minutes, seconds] = time.split(\":\").map(Number);\n      return minutes * 60 + seconds;\n    },\n    convertSecondsToTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = seconds % 60;\n      return `${String(minutes).padStart(2, \"0\")}:${String(\n        remainingSeconds\n      ).padStart(2, \"0\")}`;\n    },\n\n    //submit order course\n    async submitFormOrderCourse() {\n      try {\n        this.course.id != null ? (this.orderData.courseID = this.course.id) : 0;\n\n        const res = await axios\n          .post(\"http://localhost:8085/api/order\", this.orderData)\n          .then(async (data) => {\n            if (data.status == 200) {\n              this.paymentData.orderID = data.data.data.id;\n              this.course.price != null\n                ? (this.paymentData.totalPrice = this.course.price)\n                : 0;\n              this.paymentData.paymentMethod = \"Smart Banking Online\";\n\n              await axios\n                .post(\"http://localhost:8085/api/payment\", this.paymentData)\n                .then(async () => {\n                  this.orderData.status = \"Đăng ký thành công\";\n\n                  await axios\n                    .put(\n                      \"http://localhost:8085/api/order/\" + data.data.data.id,\n                      this.orderData\n                    )\n                    .then(async (response) => {\n                      if (response.status == 200) {\n                        console.log(\"đăng ký thành công\");\n                      }\n                    });\n                });\n            }\n          });\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n\n  data() {\n    return {\n      paymentData: {\n        orderID: 0,\n        totalPrice: 0,\n        paymentMethod: \"\",\n      },\n      interval: null,\n      countdown: \"10:00\",\n      orderData: {\n        userID:\n          localStorage.getItem(\"idUser\") != null\n            ? localStorage.getItem(\"idUser\")\n            : null,\n        courseID: this.$route.params.id,\n        codeOrder: \"\",\n        status: \"Đang xử lý\",\n      },\n      isPopup: false,\n      contents: {\n        title:\n          \"Đăng ký khóa học thành công. Theo dõi khóa học tại trang quản lý của bạn!\",\n        status: true,\n      },\n    };\n  },\n  beforeUnmount() {\n    clearInterval(this.interval); // Clear the interval to prevent memory leaks\n    window.removeEventListener(\"beforeunload\", this.handleBeforeUnload);\n  },\n  components: {\n    PopupScreen,\n  },\n};\n</script>\n"],"mappings":";;;EAGIA,KAAK,EAAC;;;EAKJA,KAAK,EAAC;AAAyH;;EAE1HA,KAAK,EAAC;AAAgC;gCACzCC,mBAAA,CAIK;EAHHD,KAAK,EAAC;AAAwE,GAC/E,uBAED;;EACGA,KAAK,EAAC;AAAsD;;EAK5DA,KAAK,EAAC;AAAoD;;EAC1DA,KAAK,EAAC;AAA4B;;EAE5BE,GAAG,EAAC,EAAE;EAACF,KAAK,EAAC;;;EAInBA,KAAK,EAAC;AAA4B;;EAE5BA,KAAK,EAAC,kCAAkC;EAACE,GAAG,EAAC;;;;;;SA5BpDC,MAAA,CAAAC,MAAM,Y,cADdC,mBAAA,CAkLM,OAlLNC,UAkLM,GA9KeC,KAAA,CAAAC,OAAO,I,cAA1BC,YAAA,CAA+DC,sBAAA;;IAAlCC,QAAQ,EAAEJ,KAAA,CAAAI;8EAEvCV,mBAAA,CA+DM,OA/DNW,UA+DM,GA5DJX,mBAAA,CASM,OATNY,UASM,GARJC,UAIK,EACLb,mBAAA,CAEI,KAFJc,UAEI,EAAAC,gBAAA,CADCT,KAAA,CAAAU,SAAS,iB,GAIhBhB,mBAAA,CAaM,OAbNiB,UAaM,GAZJjB,mBAAA,CAKI,KALJkB,UAKI,G,iBALkC,iBAEpC,GAAAlB,mBAAA,CAEU,SAFVmB,UAEU,EAAAJ,gBAAA,CADRb,MAAA,CAAAC,MAAM,CAACiB,KAAK,iB,GAGhBpB,mBAAA,CAKI,KALJqB,UAKI,G,iBALkC,gBAEpC,GAAArB,mBAAA,CAEU,SAFVsB,WAEU,EAAAP,gBAAA,CADRQ,IAAA,CAAAC,SAAS,iB,KAKfC,WAYM,C,GAwBRC,WA0GM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}