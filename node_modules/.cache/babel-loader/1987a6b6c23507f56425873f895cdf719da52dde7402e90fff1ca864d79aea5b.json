{"ast":null,"code":"import SidebarteacherScreen from \"./SidebarteacherScreen.vue\";\nimport axios from \"axios\";\nimport { ref } from \"vue\";\nimport { useRoute } from 'vue-router';\nexport default {\n  setup() {\n    var selectedFile = ref(null);\n    const route = useRoute();\n    const uploadLesson = async () => {\n      try {\n        if (selectedFile.value != null) {\n          //create params send with api\n          const formData = new FormData();\n          formData.append(\"file\", this.selectedFile);\n\n          //send API upload file\n          await axios.post(\"http://localhost:8087/api/upload\", formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\" // Important for handling files\n            }\n          }).then(response => {\n            if (response.status == 200) {\n              const res = response.data.data;\n              this.lesson.duration = res.duration;\n              this.lesson.urlVideo = res.url;\n\n              //get thematic id from url\n              const thematicID = route.params.id;\n              this.lesson.thematicID = thematicID;\n              console.log(this.lesson);\n            }\n          });\n        }\n      } catch (error) {\n        console.error(\"Error uploading file:\", error);\n      }\n    };\n    return {\n      uploadLesson,\n      selectedFile\n    };\n  },\n  components: {\n    SidebarteacherScreen\n  },\n  data() {\n    return {\n      lesson: {\n        name: \"\",\n        thematicID: 0,\n        urlVideo: \"\",\n        duration: \"\"\n      }\n    };\n  },\n  methods: {\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["SidebarteacherScreen","axios","ref","useRoute","setup","selectedFile","route","uploadLesson","value","formData","FormData","append","post","headers","then","response","status","res","data","lesson","duration","urlVideo","url","thematicID","params","id","console","log","error","components","name","methods","handleFileChange","event","inputFile","target","files","length"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\Professional\\CourseVideoScreen.vue"],"sourcesContent":["<template>\n  <div class=\"w-2/3 m-auto max-sm:w-full max-sm:px-5 sm:px-3 lg:px-0 mt-14\">\n    <div class=\"w-full flex my-5 max-sm:flex-col\">\n      <sidebarteacher-screen></sidebarteacher-screen>\n      <div class=\"ml-6 w-4/5 max-sm:mt-4 bg-white max-sm:ml-0 shadow-md\">\n        <div class=\"p-4\">\n          <p class=\"text-3xl font-semibold flex justify-center text-blue-900\">\n            Thông tin chuyên đề\n          </p>\n        </div>\n        <div class=\"flex justify-between max-sm:flex-col\">\n          <form\n            @submit.prevent=\"uploadLesson\"\n            class=\"w-full flex flex-col justify-center max-sm:w-full max-sm:p-2\"\n            style=\"margin-left: 50%; transform: translateX(-50%)\"\n          >\n            <!-- <span class=\"py-2 font-semibold\">Mã khóa học:</span>\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\n    \n                        <span class=\"py-2 font-semibold\">Mã chuyên đề:</span>\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\n         -->\n            <span class=\"py-2 font-semibold\"\n              >Tên bài giảng: (Số lượng bài giảng được phép\n              <span class=\"text-red-600\">2</span> )</span\n            >\n            <input\n              v-model=\"lesson.name\"\n              class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\"\n              type=\"text\"\n              placeholder=\"Tên chuyên đề:\"\n            />\n\n            <span class=\"py-2 font-semibold\">Chọn video giảng:</span>\n            <div class=\"relative h-8 border border-blue-900 w-full rounded max-sm:w-full\">\n              <label\n                class=\"absolute flex right-0 items-center pr-1 h-full w-full\"\n                for=\"filevideocourse\"\n              >\n                <p class=\"text-left w-full pl-2 text-gray-400\">\n                  {{ selectedFile }}\n                </p>\n                <i class=\"fa-regular fa-folder-open cursor-pointer text-blue-900\"></i>\n                <input\n                  @change=\"handleFileChange\"\n                  class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full hidden\"\n                  type=\"file\"\n                  id=\"filevideocourse\"\n                  placeholder=\"Bài giảng\"\n                />\n              </label>\n            </div>\n\n            <div class=\"flex justify-end w-full my-4 max-sm:w-full\">\n              <button\n                class=\"bg-gray-400 text-white p-2 w-1/5 mr-4 rounded text-sm max-sm:mr-2\"\n              >\n                Hủy\n              </button>\n              <button\n                class=\"bg-blue-900 text-white p-2 w-2/5 rounded text-sm max-sm:mr-0\"\n              >\n                Lưu bài giảng\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SidebarteacherScreen from \"./SidebarteacherScreen.vue\";\nimport axios from \"axios\";\nimport { ref } from \"vue\";\nimport { useRoute } from 'vue-router';\n\nexport default {\n  setup() {\n    var selectedFile = ref(null);\n    const route = useRoute();\n    const uploadLesson = async () => {\n      try {\n        if (selectedFile.value != null) {\n          //create params send with api\n          const formData = new FormData();\n          formData.append(\"file\", this.selectedFile);\n\n          //send API upload file\n          await axios\n            .post(\"http://localhost:8087/api/upload\", formData, {\n              headers: {\n                \"Content-Type\": \"multipart/form-data\", // Important for handling files\n              },\n            })\n            .then((response) => {\n              if (response.status == 200) {\n                const res = response.data.data;\n                this.lesson.duration = res.duration;\n                this.lesson.urlVideo = res.url;\n\n                //get thematic id from url\n                const thematicID = route.params.id;\n\n                this.lesson.thematicID = thematicID;\n                console.log(this.lesson);\n              }\n            });\n        }\n      } catch (error) {\n        console.error(\"Error uploading file:\", error);\n      }\n    };\n\n    return {\n      uploadLesson,\n      selectedFile,\n    };\n  },\n  components: {\n    SidebarteacherScreen,\n  },\n  data() {\n    return {\n      lesson: {\n        name: \"\",\n        thematicID: 0,\n        urlVideo: \"\",\n        duration: \"\",\n      },\n    };\n  },\n  methods: {\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    },\n  },\n};\n</script>\n"],"mappings":"AAwEA,OAAOA,oBAAmB,MAAO,4BAA4B;AAC7D,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,GAAE,QAAS,KAAK;AACzB,SAASC,QAAO,QAAS,YAAY;AAErC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,IAAIC,YAAW,GAAIH,GAAG,CAAC,IAAI,CAAC;IAC5B,MAAMI,KAAI,GAAIH,QAAQ,CAAC,CAAC;IACxB,MAAMI,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,IAAIF,YAAY,CAACG,KAAI,IAAK,IAAI,EAAE;UAC9B;UACA,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;UAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACN,YAAY,CAAC;;UAE1C;UACA,MAAMJ,KAAI,CACPW,IAAI,CAAC,kCAAkC,EAAEH,QAAQ,EAAE;YAClDI,OAAO,EAAE;cACP,cAAc,EAAE,qBAAqB,CAAE;YACzC;UACF,CAAC,EACAC,IAAI,CAAEC,QAAQ,IAAK;YAClB,IAAIA,QAAQ,CAACC,MAAK,IAAK,GAAG,EAAE;cAC1B,MAAMC,GAAE,GAAIF,QAAQ,CAACG,IAAI,CAACA,IAAI;cAC9B,IAAI,CAACC,MAAM,CAACC,QAAO,GAAIH,GAAG,CAACG,QAAQ;cACnC,IAAI,CAACD,MAAM,CAACE,QAAO,GAAIJ,GAAG,CAACK,GAAG;;cAE9B;cACA,MAAMC,UAAS,GAAIjB,KAAK,CAACkB,MAAM,CAACC,EAAE;cAElC,IAAI,CAACN,MAAM,CAACI,UAAS,GAAIA,UAAU;cACnCG,OAAO,CAACC,GAAG,CAAC,IAAI,CAACR,MAAM,CAAC;YAC1B;UACF,CAAC,CAAC;QACN;MACF,EAAE,OAAOS,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IAED,OAAO;MACLrB,YAAY;MACZF;IACF,CAAC;EACH,CAAC;EACDwB,UAAU,EAAE;IACV7B;EACF,CAAC;EACDkB,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE;QACNW,IAAI,EAAE,EAAE;QACRP,UAAU,EAAE,CAAC;QACbF,QAAQ,EAAE,EAAE;QACZD,QAAQ,EAAE;MACZ;IACF,CAAC;EACH,CAAC;EACDW,OAAO,EAAE;IACPC,gBAAgBA,CAACC,KAAK,EAAE;MACtB,MAAMC,SAAQ,GAAID,KAAK,CAACE,MAAM;MAC9B,IAAID,SAAS,CAACE,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;QAC9B;QACA,IAAI,CAAChC,YAAW,GAAI4B,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC3C,OAAO;QACL,IAAI,CAAC/B,YAAW,GAAI,eAAe;MACrC;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}