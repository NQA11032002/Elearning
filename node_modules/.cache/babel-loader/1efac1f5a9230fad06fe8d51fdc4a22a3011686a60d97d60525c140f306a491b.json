{"ast":null,"code":"import { useRoute } from 'vue-router';\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  setup() {\n    const course = ref();\n    const route = useRoute();\n    const courseId = route.params.id;\n    const getCourse = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8087/api/course/\" + courseId);\n        course.value = res.data.data;\n        if (course.value.courseImages.length > 0) {\n          course.value.urlImage = course.value.courseImages[0].urlImage;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getCourse();\n    return {\n      course,\n      getCourse\n    };\n  },\n  method: {\n    //submit order course\n    async submitFormOrderCourse() {\n      try {\n        this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n        const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async data => {\n          if (data.status == 200) {\n            this.paymentData.orderID = data.data.data.id;\n            this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n            this.paymentData.paymentMethod = \"Smart Banking Online\";\n            await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n              this.orderData.status = \"Đăng ký thành công\";\n              await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async response => {\n                if (response.status == 200) {\n                  console.log(\"đăng ký thành công\");\n                }\n              });\n            });\n          }\n        });\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  data() {\n    return {\n      paymentData: {\n        orderID: 0,\n        totalPrice: 0,\n        paymentMethod: \"\"\n      },\n      title: \"Đăng ký khóa học thành công. Theo dõi khóa học tại trang quản lý của bạn.!\",\n      subTitle: \"\",\n      content: \"\",\n      status: true\n    };\n  }\n};","map":{"version":3,"names":["useRoute","ref","axios","setup","course","route","courseId","params","id","getCourse","res","get","value","data","courseImages","length","urlImage","error","console","log","method","submitFormOrderCourse","orderData","courseID","post","then","status","paymentData","orderID","price","totalPrice","paymentMethod","put","response","title","subTitle","content"],"sources":["C:\\Vuejs\\Elearning\\src\\components\\client\\common\\PopupScreen.vue"],"sourcesContent":["<template>\n  <div id=\"popup-modal\" tabindex=\"-1\" class=\"overflow-y-auto w-100 fixed overflow-x-hidden justify-center items-center w-full h-[calc(100%-1rem)] max-h-full\">\n    <div class=\"p-4 w-full max-w-md max-h-full fixed top-1/2 left-1/2 z-50 -translate-x-1/2 -translate-y-1/2 shadow-2xl shadow-gray-300 bg-white rounded-lg\">\n        <div class=\"relative  dark:bg-gray-700 z-50 \">\n            <button type=\"button\" class=\"absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white\" data-modal-hide=\"popup-modal\">\n                <svg class=\"w-3 h-3\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 14 14\">\n                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6\"/>\n                </svg>\n                <span class=\"sr-only\">Close modal</span>\n            </button>\n            <div class=\"p-4 md:p-5 text-center\">\n                <svg class=\"mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\">\n                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"/>\n                </svg>\n                <h3 class=\"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400\">{{ title }}</h3>\n\n                <a href=\"/course\" type=\"button\" class=\"text-gray-500 cursor-pointer bg-white hover:bg-gray-100 focus:outline-none rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">Quay về</a>\n                <a href=\"/my-course\" class=\"text-white cursor-pointer bg-blue-900 hover:bg-blue-700 focus:outline-none  dark:focus:ring-blue-900 font-medium rounded-lg text-sm inline-flex items-center ml-3 px-5 py-2.5 text-center me-2\">\n                  Khóa học\n              </a>\n            </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { useRoute } from 'vue-router';\n  import { ref } from \"vue\";\n  import axios from \"axios\";\n\nexport default{\n  setup(){\n      const course = ref();\n      const route = useRoute();\n      const courseId = route.params.id;\n\n      const getCourse = async () => {\n\n        try {\n          const res = await axios.get(\"http://localhost:8087/api/course/\" + courseId);\n\n          course.value = res.data.data;\n\n          if(course.value.courseImages.length > 0)\n          {\n            course.value.urlImage = course.value.courseImages[0].urlImage;\n          }\n\n        } catch (error) {\n          console.log(error);\n        }\n    }\n\n    getCourse();\n\n    return {\n      course,\n      getCourse\n    }\n  },\n  method:{\n        //submit order course\n        async submitFormOrderCourse(){\n        try{\n          this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n\n            \n          const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async (data) => {\n            if(data.status == 200)\n            {\n              this.paymentData.orderID = data.data.data.id;\n              this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n              this.paymentData.paymentMethod = \"Smart Banking Online\";\n                \n              await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n                this.orderData.status = \"Đăng ký thành công\";\n\n                await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async (response) => {\n                  if(response.status == 200)\n                  {\n                    console.log(\"đăng ký thành công\")\n\n                  }\n                })\n              })\n            }\n          });\n          return res;\n        } catch (error){\n          console.log(error);\n        }\n      },\n\n  },\n  data(){\n    return {\n      paymentData: {\n          orderID: 0,\n          totalPrice: 0,\n          paymentMethod: \"\",\n        },\n      title : \"Đăng ký khóa học thành công. Theo dõi khóa học tại trang quản lý của bạn.!\",\n      subTitle: \"\",\n      content: \"\",\n      status: true\n    }\n  }\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}