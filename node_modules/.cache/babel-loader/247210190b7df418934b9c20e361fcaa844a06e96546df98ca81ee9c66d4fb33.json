{"ast":null,"code":"import SidebarteacherScreen from \"./SidebarteacherScreen.vue\";\nimport axios from \"axios\";\nimport { findApiByName } from \"../../../assets/js/apiUtil.js\";\nexport default {\n  mounted() {\n    this.getAllCategories();\n    this.getAllEducations();\n    console.log(this.categories);\n  },\n  components: {\n    SidebarteacherScreen\n  },\n  methods: {\n    async getAllCategories() {\n      const apiObject = findApiByName(\"categories\", \"common\").url;\n      await axios.get(apiObject).then(res => {\n        if (res.status == 200) {\n          this.categories = res.data.data;\n        }\n      });\n    },\n    async getAllEducations() {\n      const apiObject = findApiByName(\"educations\", \"common\").url;\n      await axios.get(apiObject).then(res => {\n        if (res.status == 200) {\n          this.educations = res.data.data;\n        }\n      });\n    },\n    async saveCourse() {\n      let apiObject = findApiByName(\"course\", \"upload\").url;\n      try {\n        if (this.selectedFile != null) {\n          //create params send with api\n          const formData = new FormData();\n          formData.append('file', this.selectedFile);\n\n          //send API upload file\n          await axios.post(apiObject, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data' // Important for handling files\n            }\n          }).then(response => {\n            if (response.status == 200) {\n              apiObject = findApiByName(\"course\", \"common\").url;\n              this.imageCourse.urlImage = response.data.data.url;\n              axios.post(apiObject, this.course).then(data => {\n                if (data.status == 200) {\n                  this.imageCourse.courseID = data.data.data.id;\n                }\n              });\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      }\n    },\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n        console.log(this.selectedFile.name);\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    }\n  },\n  data() {\n    return {\n      categories: {\n        id: 0,\n        name: \"\"\n      },\n      educations: {\n        id: 0,\n        name: \"\"\n      },\n      course: {\n        categoryID: 0,\n        educationID: 0,\n        title: null,\n        description: null,\n        price: null,\n        count: null,\n        status: false\n      },\n      imageCourse: {\n        courseID: null,\n        urlImage: null\n      },\n      selectedFile: null\n    };\n  }\n};","map":{"version":3,"names":["SidebarteacherScreen","axios","findApiByName","mounted","getAllCategories","getAllEducations","console","log","categories","components","methods","apiObject","url","get","then","res","status","data","educations","saveCourse","selectedFile","formData","FormData","append","post","headers","response","imageCourse","urlImage","course","courseID","id","error","handleFileChange","event","inputFile","target","files","length","name","categoryID","educationID","title","description","price","count"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\Profession\\CourseManagement.vue"],"sourcesContent":["<template>\n  <div class=\"w-2/3 m-auto max-sm:w-full max-sm:px-5 sm:px-3 lg:px-0 mt-14\">\n    <div class=\"w-full flex my-5 max-sm:flex-col\">\n      <sidebarteacher-screen></sidebarteacher-screen>\n      <div class=\"ml-6 w-4/5 max-sm:mt-4 bg-white max-sm:w-full max-sm:ml-0\">\n        <div class=\"shadow-md p-5\">\n          <form class=\"flex flex-wrap justify-center max-sm:w-full max-sm:p-2 gap-3\">\n            <p class=\"text-xl font-semibold\">Thông tin khóa học</p>\n\n            <div class=\"w-full\">\n              <input\n                class=\"text-sm outline-none border px-2 border-gray-300 focus:border-blue-900 w-full py-2 rounded max-sm:w-full\"\n                type=\"text\" v-model=\"course.title\" placeholder=\"Tiêu đề:\" />\n            </div>\n\n            <select id=\"countries\" v-model=\"course.categoryID\"\n              class=\"border w-full outline-none border-gray-300 focus:border-blue-900 text-sm rounded block px-2 py-2\">\n              <option value=0 disabled selected>Chọn loại khóa học</option>\n              <option :value=\"category.id\" v-for=\"category in categories\" :key=\"category.id\">{{ category.name }}\n              </option>\n            </select>\n\n            <select id=\"countries\" v-model=\"course.educationID\"\n              class=\"border w-full outline-none border-gray-300 focus:border-blue-900 text-sm rounded block px-2 py-2\">\n              <option value=0 disabled selected>Chọn cấp bậc khóa học</option>\n              <option :value=\"education.id\" v-for=\"education in educations\" :key=\"education.id\">{{ education.name }}\n              </option>\n            </select>\n\n            <div class=\"w-full\">\n              <input v-model=\"course.count\"\n                class=\"text-sm outline-none border px-2 border-gray-300 focus:border-blue-900 w-full py-2 rounded max-sm:w-full\"\n                type=\"number\" placeholder=\"Số lượng chuyên đề:\" />\n            </div>\n\n            <div class=\"w-full\">\n              <input v-model=\"course.price\"\n                class=\"text-sm outline-none border px-2 border-gray-300 focus:border-blue-900 w-full py-2 rounded max-sm:w-full\"\n                type=\"number\" placeholder=\"Giá khóa học\" />\n            </div>\n\n            <div class=\"w-full\">\n              <textarea v-model=\"course.description\"\n                class=\"py-2 text-sm resize-none outline-none border px-2 border-gray-300 focus:border-blue-900 max-sm:w-full w-full rounded\"\n                name=\"\" id=\"\" rows=\"6\" placeholder=\"Mô tả khóa học:\"></textarea>\n            </div>\n\n            <div class=\"relative h-8 border focus:border-blue-900 w-full rounded max-sm:w-full\">\n              <label class=\"absolute flex right-0 items-center pr-1 h-full w-full\" for=\"file-image\">\n                <p class=\"text-left w-full pl-2 text-\">{{ selectedFile != null ? selectedFile.name : null }}</p>\n                <i class=\"fa-regular fa-folder-open cursor-pointer text-blue-900\"></i>\n                <input @change=\"handleFileChange\"\n                  class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full hidden\" type=\"file\"\n                  id=\"file-image\" placeholder=\"Hình ảnh khóa học\">\n              </label>\n            </div>\n\n            <div class=\"flex justify-end w-full max-sm:w-full\">\n              <button class=\"bg-gray-400 text-white py-2 px-4 mr-4 rounded text-sm max-sm:mr-2\">\n                Hủy\n              </button>\n              <button @click.prevent=\"saveCourse\" class=\"bg-blue-900 text-white py-2 px-2 rounded text-sm max-sm:mr-0\">\n                Lưu khóa học\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SidebarteacherScreen from \"./SidebarteacherScreen.vue\";\nimport axios from \"axios\";\nimport { findApiByName } from \"../../../assets/js/apiUtil.js\";\n\nexport default {\n  mounted() {\n    this.getAllCategories();\n    this.getAllEducations();\n\n    console.log(this.categories)\n  },\n  components: {\n    SidebarteacherScreen,\n  },\n  methods: {\n    async getAllCategories() {\n      const apiObject = findApiByName(\"categories\", \"common\").url;\n\n      await axios.get(apiObject).then((res) => {\n        if (res.status == 200) {\n          this.categories = res.data.data;\n        }\n      });\n    },\n    async getAllEducations() {\n      const apiObject = findApiByName(\"educations\", \"common\").url;\n\n      await axios.get(apiObject).then((res) => {\n        if (res.status == 200) {\n          this.educations = res.data.data;\n        }\n      });\n    },\n\n    async saveCourse() {\n      let apiObject = findApiByName(\"course\", \"upload\").url;\n\n      try {\n        if (this.selectedFile != null) {\n          //create params send with api\n          const formData = new FormData();\n          formData.append('file', this.selectedFile);\n\n          //send API upload file\n          await axios.post(apiObject, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data', // Important for handling files\n            },\n          }).then((response) => {\n            if (response.status == 200) {\n              apiObject = findApiByName(\"course\", \"common\").url;\n              this.imageCourse.urlImage = response.data.data.url;\n\n              axios.post(apiObject, this.course).then((data) => {\n                if (data.status == 200) {\n                  this.imageCourse.courseID = data.data.data.id;\n\n                }\n              });\n            }\n          })\n        }\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      }\n\n    },\n\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n        console.log(this.selectedFile.name)\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    },\n  },\n  data() {\n    return {\n      categories: {\n        id: 0,\n        name: \"\"\n      },\n      educations: {\n        id: 0,\n        name: \"\"\n      },\n      course: {\n        categoryID: 0,\n        educationID: 0,\n        title: null,\n        description: null,\n        price: null,\n        count: null,\n        status: false,\n      },\n      imageCourse: {\n        courseID: null,\n        urlImage: null\n      },\n      selectedFile: null,\n    }\n  }\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}