{"ast":null,"code":"import SidebarteacherScreen from './SidebarteacherScreen.vue';\nimport axios from \"axios\";\nimport { useRoute } from 'vue-router';\nexport default {\n  setup() {\n    const route = useRoute();\n    const thematicID = route.params.id;\n    return {\n      thematicID\n    };\n  },\n  components: {\n    SidebarteacherScreen\n  },\n  data() {\n    return {\n      selectedFile: null,\n      // Tên mặc định khi chưa có tệp nào được chọn\n      lesson: {\n        name: \"\",\n        thematicID: this.$route.params.id,\n        urlVideo: \"\",\n        duration: \"\"\n      }\n    };\n  },\n  methods: {\n    async uploadLesson() {\n      try {\n        if (this.selectedFile != null) {\n          //create params send with api\n          const formData = new FormData();\n          formData.append('file', this.selectedFile);\n\n          //send API upload file\n          await axios.post(\"http://localhost:8087/api/upload\", formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data' // Important for handling files\n            }\n          }).then(response => {\n            if (response.status == 200) {\n              const res = response.data.data;\n              this.lesson.duration = res.duration;\n              this.lesson.urlVideo = res.url;\n              axios.post(\"http://localhost:8087/api/course-video\", this.lesson).then(res => {\n                console.log(res);\n              });\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      }\n    },\n    handleFileChange(event) {\n      const inputFile = event.target;\n      if (inputFile.files.length > 0) {\n        // Lấy tên của tệp đầu tiên nếu có\n        this.selectedFile = event.target.files[0];\n      } else {\n        this.selectedFile = \"Chưa chọn tệp\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["SidebarteacherScreen","axios","useRoute","setup","route","thematicID","params","id","components","data","selectedFile","lesson","name","$route","urlVideo","duration","methods","uploadLesson","formData","FormData","append","post","headers","then","response","status","res","url","console","log","error","handleFileChange","event","inputFile","target","files","length"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\Profession\\CourseVideoScreen.vue"],"sourcesContent":["<template>\r\n    <div class=\"w-2/3 m-auto max-sm:w-full max-sm:px-5 sm:px-3 lg:px-0 mt-14\">\r\n        <div class=\"w-full flex my-5 max-sm:flex-col\">\r\n            <sidebarteacher-screen></sidebarteacher-screen>\r\n            <div class=\"ml-6 w-4/5 max-sm:mt-4 bg-white max-sm:ml-0 shadow-md \">\r\n                <div class=\"p-4\">\r\n                    <p class=\"text-3xl font-semibold flex justify-center text-blue-900\">Thông tin chuyên đề</p>\r\n                </div>\r\n                <div class=\"flex justify-between max-sm:flex-col\">\r\n                    <form @submit.prevent=\"uploadLesson\" class=\"w-full flex flex-col justify-center max-sm:w-full max-sm:p-2\" style=\"margin-left: 50%; transform: translateX(-50%);\">\r\n                        <!-- <span class=\"py-2 font-semibold\">Mã khóa học:</span>\r\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\r\n    \r\n                        <span class=\"py-2 font-semibold\">Mã chuyên đề:</span>\r\n                        <input class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Mã khóa học:\">\r\n         -->\r\n                        <span class=\"py-2 font-semibold\">Tên bài giảng: (Số lượng bài giảng được phép <span class=\"text-red-600\">2</span> )</span>\r\n                        <input v-model=\"lesson.name\" class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full\" type=\"text\" placeholder=\"Tên chuyên đề:\">\r\n                        \r\n    \r\n                        <span class=\"py-2 font-semibold\">Chọn video giảng:</span>\r\n                        <div class=\"relative h-8 border border-blue-900 w-full rounded max-sm:w-full\">\r\n                            <label class=\"absolute flex right-0 items-center pr-1 h-full w-full\" for=\"filevideocourse\">\r\n                                <p class=\"text-left w-full pl-2 text-gray-400\">{{ selectedFile }}</p>\r\n                                <i class=\"fa-regular fa-folder-open cursor-pointer text-blue-900\"></i>\r\n                                <input @change=\"handleFileChange\" class=\"outline-none border px-2 border-blue-900 w-full h-8 rounded max-sm:w-full hidden\" type=\"file\" id=\"filevideocourse\" placeholder=\"Bài giảng\">\r\n                            </label>\r\n                        </div>\r\n                        \r\n                        <div class=\"flex justify-end w-full my-4 max-sm:w-full\">\r\n                            <button class=\"bg-gray-400  text-white p-2 w-1/5 mr-4 rounded text-sm max-sm:mr-2\">Hủy</button>\r\n                            <button class=\"bg-blue-900 text-white p-2 w-2/5 rounded text-sm max-sm:mr-0\">Lưu bài giảng</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                \r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n<script>\r\nimport SidebarteacherScreen from './SidebarteacherScreen.vue';\r\nimport axios from \"axios\";\r\nimport { useRoute } from 'vue-router';\r\n\r\n\r\nexport default {\r\n  setup(){\r\n    const route = useRoute();\r\n    const thematicID = route.params.id;\r\n\r\n    return {\r\n      thematicID\r\n    }\r\n  },\r\n    components: {\r\n        SidebarteacherScreen,\r\n    },\r\n    data() {\r\n      return {\r\n        selectedFile: null, // Tên mặc định khi chưa có tệp nào được chọn\r\n        lesson:{\r\n          name : \"\",\r\n          thematicID : this.$route.params.id,\r\n          urlVideo : \"\",\r\n          duration : \"\"\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n\r\n      async uploadLesson(){\r\n        try {\r\n          if(this.selectedFile != null)\r\n          {\r\n            //create params send with api\r\n            const formData = new FormData();\r\n            formData.append('file', this.selectedFile);\r\n\r\n            //send API upload file\r\n            await axios.post(\"http://localhost:8087/api/upload\", formData, {\r\n              headers: {\r\n                'Content-Type': 'multipart/form-data', // Important for handling files\r\n              },\r\n            }).then((response) => {\r\n              if(response.status == 200)\r\n              {\r\n                const res = response.data.data;\r\n                this.lesson.duration = res.duration;\r\n                this.lesson.urlVideo = res.url;\r\n                \r\n                axios.post(\"http://localhost:8087/api/course-video\", this.lesson).then((res) => {\r\n                  console.log(res)\r\n                })\r\n              }\r\n            })\r\n          }\r\n        } catch (error) {\r\n          console.error('Error uploading file:', error);\r\n        }\r\n      },\r\n\r\n      handleFileChange(event) {\r\n        const inputFile = event.target;\r\n        if (inputFile.files.length > 0) {\r\n          // Lấy tên của tệp đầu tiên nếu có\r\n          this.selectedFile = event.target.files[0];\r\n        } else {\r\n          this.selectedFile = \"Chưa chọn tệp\";\r\n        }\r\n      },\r\n  },\r\n};\r\n\r\n</script>\r\n"],"mappings":"AA2CA,OAAOA,oBAAmB,MAAO,4BAA4B;AAC7D,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,QAAO,QAAS,YAAY;AAGrC,eAAe;EACbC,KAAKA,CAAA,EAAE;IACL,MAAMC,KAAI,GAAIF,QAAQ,CAAC,CAAC;IACxB,MAAMG,UAAS,GAAID,KAAK,CAACE,MAAM,CAACC,EAAE;IAElC,OAAO;MACLF;IACF;EACF,CAAC;EACCG,UAAU,EAAE;IACRR;EACJ,CAAC;EACDS,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,IAAI;MAAE;MACpBC,MAAM,EAAC;QACLC,IAAG,EAAI,EAAE;QACTP,UAAS,EAAI,IAAI,CAACQ,MAAM,CAACP,MAAM,CAACC,EAAE;QAClCO,QAAO,EAAI,EAAE;QACbC,QAAO,EAAI;MACb;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IAEP,MAAMC,YAAYA,CAAA,EAAE;MAClB,IAAI;QACF,IAAG,IAAI,CAACP,YAAW,IAAK,IAAI,EAC5B;UACE;UACA,MAAMQ,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;UAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACV,YAAY,CAAC;;UAE1C;UACA,MAAMT,KAAK,CAACoB,IAAI,CAAC,kCAAkC,EAAEH,QAAQ,EAAE;YAC7DI,OAAO,EAAE;cACP,cAAc,EAAE,qBAAqB,CAAE;YACzC;UACF,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;YACpB,IAAGA,QAAQ,CAACC,MAAK,IAAK,GAAG,EACzB;cACE,MAAMC,GAAE,GAAIF,QAAQ,CAACf,IAAI,CAACA,IAAI;cAC9B,IAAI,CAACE,MAAM,CAACI,QAAO,GAAIW,GAAG,CAACX,QAAQ;cACnC,IAAI,CAACJ,MAAM,CAACG,QAAO,GAAIY,GAAG,CAACC,GAAG;cAE9B1B,KAAK,CAACoB,IAAI,CAAC,wCAAwC,EAAE,IAAI,CAACV,MAAM,CAAC,CAACY,IAAI,CAAEG,GAAG,IAAK;gBAC9EE,OAAO,CAACC,GAAG,CAACH,GAAG;cACjB,CAAC;YACH;UACF,CAAC;QACH;MACF,EAAE,OAAOI,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IAEDC,gBAAgBA,CAACC,KAAK,EAAE;MACtB,MAAMC,SAAQ,GAAID,KAAK,CAACE,MAAM;MAC9B,IAAID,SAAS,CAACE,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;QAC9B;QACA,IAAI,CAAC1B,YAAW,GAAIsB,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC3C,OAAO;QACL,IAAI,CAACzB,YAAW,GAAI,eAAe;MACrC;IACF;EACJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}