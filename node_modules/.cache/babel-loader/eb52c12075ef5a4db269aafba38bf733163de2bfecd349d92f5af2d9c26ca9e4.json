{"ast":null,"code":"import { useRoute } from 'vue-router';\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport PopupScreen from './common/PopupScreen.vue';\nexport default {\n  mounted() {\n    // Convert initial time to seconds\n    let timeInSeconds = this.convertTimeToSeconds(this.countdown);\n\n    // Update the countdown every second\n    this.interval = setInterval(() => {\n      if (timeInSeconds > 0) {\n        timeInSeconds--;\n        this.countdown = this.convertSecondsToTime(timeInSeconds);\n        this.isPopup = false;\n      } else {\n        // Countdown reached zero, you can perform additional actions here\n        clearInterval(this.interval);\n        this.isPopup = true;\n\n        // Change contents in the child component\n        this.contents.title = \"Hết thời hạn thanh toán, vui lòng thử lại.!\";\n      }\n    }, 1000);\n  },\n  setup() {\n    const course = ref();\n    const route = useRoute();\n    const courseId = route.params.id;\n    const getCourse = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:8087/api/course/\" + courseId);\n        course.value = res.data.data;\n        if (course.value.courseImages.length > 0) {\n          course.value.urlImage = course.value.courseImages[0].urlImage;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getCourse();\n    return {\n      course,\n      getCourse\n    };\n  },\n  methods: {\n    convertTimeToSeconds(time) {\n      const [minutes, seconds] = time.split(\":\").map(Number);\n      return minutes * 60 + seconds;\n    },\n    convertSecondsToTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = seconds % 60;\n      return `${String(minutes).padStart(2, \"0\")}:${String(remainingSeconds).padStart(2, \"0\")}`;\n    },\n    //submit order course\n    async submitFormOrderCourse() {\n      try {\n        this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n        const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async data => {\n          if (data.status == 200) {\n            this.paymentData.orderID = data.data.data.id;\n            this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n            this.paymentData.paymentMethod = \"Smart Banking Online\";\n            await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n              this.orderData.status = \"Đăng ký thành công\";\n              await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async response => {\n                if (response.status == 200) {\n                  console.log(\"đăng ký thành công\");\n                }\n              });\n            });\n          }\n        });\n        return res;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  data() {\n    return {\n      paymentData: {\n        orderID: 0,\n        totalPrice: 0,\n        paymentMethod: \"\"\n      },\n      interval: null,\n      countdown: \"00:10\",\n      orderData: {\n        userID: localStorage.getItem('idUser') != null ? localStorage.getItem('idUser') : null,\n        courseID: this.$route.params.id,\n        status: \"Đang xử lý\"\n      },\n      isPopup: false,\n      contents: {\n        title: \"Đăng ký khóa học thành công. Theo dõi khóa học tại trang quản lý của bạn!\",\n        status: true\n      }\n    };\n  },\n  beforeUnmount() {\n    clearInterval(this.interval); // Clear the interval to prevent memory leaks\n  },\n  components: {\n    PopupScreen\n  }\n};","map":{"version":3,"names":["useRoute","ref","axios","PopupScreen","mounted","timeInSeconds","convertTimeToSeconds","countdown","interval","setInterval","convertSecondsToTime","isPopup","clearInterval","contents","title","setup","course","route","courseId","params","id","getCourse","res","get","value","data","courseImages","length","urlImage","error","console","log","methods","time","minutes","seconds","split","map","Number","Math","floor","remainingSeconds","String","padStart","submitFormOrderCourse","orderData","courseID","post","then","status","paymentData","orderID","price","totalPrice","paymentMethod","put","response","userID","localStorage","getItem","$route","beforeUnmount","components"],"sources":["F:\\VueJS\\Elearning-Frontend\\Elearning\\src\\components\\client\\PaymentScreen.vue"],"sourcesContent":["<template>\n  <div  class=\" text-slate-600 flex lg:w-2/3 my-28 mx-auto gap-6 h-full py-5 max-sm:flex-col max-sm:w-full max-sm:px-5 md:w-10/12\">\n    <PopupScreen v-if=\"isPopup\" :contents=\"contents\"></PopupScreen>\n\n    <div class=\"border-r lg:w-1/3 border-slate-700 flex flex-col gap-5 pr-5 max-sm:flex-col max-sm:w-full max-sm:pr-0 max-sm:border-r-0\">\n      <div class=\"border-b border-slate-700 pb-4\">\n        <h3 class=\"text-xl font-semibold text-slate-700 max-sm:text-lg max-sm:text-center\">Đang chờ thanh toán</h3>\n        <p class=\"text-center text-2xl font-medium mt-3 text-slate-700\">{{ countdown }}</p>\n      </div>\n\n      <div class=\"border-b border-slate-700 pb-4 flex flex-col gap-3\">\n        <p class=\"font-medium text-slate-700\">Tên khóa học: <label for=\"\" class=\"pl-1 text-orange-400 font-medium\">HTML PRO</label></p>\n        <p class=\"font-medium text-slate-700\">Mã đơn hàng: <label class=\"pl-1 text-orange-400 font-medium\" for=\"\">FBC1X29L</label></p>\n      </div>\n\n      <div class=\"flex border-b border-slate-700 pb-4\">\n        <input type=\"text\" class=\"rounded-md py-2 px-4 w-full text-sm bg-slate-600 outline-none  text-gray-100\" placeholder=\"Nhập mã khuyến mãi\" />\n\n        <button class=\"border rounded-md text-sm text-gray-300 ml-3 text-center outline-none bg-neutral-800 border-slate-500 w-44 cursor-pointer\">ÁP DỤNG</button>\n      </div>\n\n      <div>\n        <h1 class=\"text-xl font-semibold text-slate-700 mb-2 max-sm:text-lg\">Chi tiết thanh toán</h1>\n\n        <div class=\" bg-neutral-800 p-3 rounded-lg py-5 shadow-lg\">\n          <div class=\"flex justify-between border-b border-slate-700 pb-5\">\n            <p class=\"flex-shrink-0 font-medium text-gray-300\">Giá bán: </p>\n            <div class=\"flex-1 flex justify-end gap-3\">\n              <p class=\"text-sm line-through text-gray-300\">2.500.000đ</p>\n              <p class=\"text-sky-300\">1.299.00đ</p>\n            </div>\n          </div>\n\n          <div class=\"flex justify-between pt-5\">\n            <p class=\"font-medium text-gray-300\">Tổng tiền:</p>\n            <h3 class=\"text-xl text-sky-300\">1.299.000đ</h3>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div >\n      <div class=\"flex flex-col gap-5\">\n        <div>\n          <h1 class=\"text-xl font-semibold text-slate-700 max-sm:text-lg\">Chuyển khoản bằng QR</h1>\n          <div class=\"flex items-center justify-center gap-5 max-sm:flex-col max-sm:gap-0\">\n            <img\n              class=\"w-36 h-36 object-cover rounded-lg my-4\"\n              src=\"https://i.vdoc.vn/data/image/2017/11/23/cach-tao-ma-qr-code.png\"\n              alt=\"\"\n            />\n\n            <div class=\"flex flex-col gap-3\">\n              <p class=\"text-sm\">Bước 1: Mở app ngân hàng và quét mã QR</p>\n              <p class=\"text-sm\">\n                Bước 2: Đảm bảo nội dung chuyển khoản là\n                <label for=\"\" class=\"text-orange-400\">F8C1X29L</label>\n              </p>\n              <p class=\"text-sm\">Bước 3: Thực hiện thanh toán.</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"\">\n          <h1 class=\"text-xl font-semibold text-slate-700 max-sm:text-lg\">Chuyển khoản thủ công</h1>\n          <div class=\"flex flex-wrap gap-5 w-full mt-3\">\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-gray-400 text-sm\">Số tài khoản</p>\n              <div class=\"flex justify-between items-center  mt-2\">\n                <p class=\"text-gray-200\">9353538222</p>\n                <img class=\"cursor-grab hover:opacity-80\" src=\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\" alt=\"\">\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Tên tài khoản</p>\n              <div class=\"mt-2\">\n                <h1 class=\"font-medium text-gray-200\">ĐẶNG NGỌC SƠN</h1>\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Nội dung</p>\n              <div class=\"flex justify-between items-center mt-2\">\n                <p class=\"text-orange-400\">F8C1X29L</p>\n                <img class=\"cursor-grab hover:opacity-80\" src=\"https://fullstack.edu.vn/static/media/clone.d2ecd3252b355d732cabb677ec33e5c6.svg\" alt=\"\">\n              </div>\n            </div>\n\n            <div class=\"w-1/3 bg-neutral-800 p-3 rounded-lg max-sm:w-full\">\n              <p class=\"text-sm text-gray-400\">Chi nhánh</p>\n              <div class=\"mt-2\">\n                <p class=\"text-gray-200\">Vietcombank Hà Nội</p>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"flex flex-col gap-3\">\n          <h1 class=\"text-xl font-medium\">Lưu ý</h1>\n          <p class=\"text-sm\">Tối đa 5 phút sau thời gian chuyển khoản, nếu hệ thống không phản hồi vui lòng liên hệ ngay bộ phận hỗ trợ của F8.</p>\n\n          <div class=\"flex items-center gap-2\">\n            <img src=\"https://fullstack.edu.vn/static/media/phone.0c60754adb11aa1f42791f4b80423f6d.svg\" alt=\"\">\n            <p class=\"text-sm\">0246.329.1102</p>\n          </div>\n          \n          <div class=\"flex items-center gap-2\">\n            <img src=\"\thttps://fullstack.edu.vn/static/media/envelope.e7b59ce57be76a9435865a20e7021f56.svg\" alt=\"\">\n            <p class=\"text-sm\">contact@fullstack.edu.vn</p>\n          </div>\n\n          <div class=\"flex items-center gap-2\">\n            <img src=\"https://fullstack.edu.vn/static/media/map-location.d448ea4630d95df7331a9b1162a39a8f.svg\" alt=\"\">\n            <p class=\"text-sm\">Số 11D, lô A10, khu đô thị Nam Trung Yên, Phường Yên Hòa, Quận Cầu Giấy, TP. Hà Nội</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { useRoute } from 'vue-router';\n  import { ref } from \"vue\";\n  import axios from \"axios\";\n  import  PopupScreen  from './common/PopupScreen.vue';\n\n  export default{\n    mounted() {\n      // Convert initial time to seconds\n      let timeInSeconds = this.convertTimeToSeconds(this.countdown);\n\n      // Update the countdown every second\n      this.interval = setInterval(() => {\n        if (timeInSeconds > 0) {\n          timeInSeconds--;\n          this.countdown = this.convertSecondsToTime(timeInSeconds);\n\n          this.isPopup = false;\n        } else {\n          // Countdown reached zero, you can perform additional actions here\n          clearInterval(this.interval);\n          this.isPopup = true;\n\n          // Change contents in the child component\n          this.contents.title = \"Hết thời hạn thanh toán, vui lòng thử lại.!\";\n        }\n      }, 1000);\n\n    },\n    setup(){\n      const course = ref();\n      const route = useRoute();\n      const courseId = route.params.id;\n\n      const getCourse = async () => {\n\n        try {\n          const res = await axios.get(\"http://localhost:8087/api/course/\" + courseId);\n\n          course.value = res.data.data;\n\n          if(course.value.courseImages.length > 0)\n          {\n            course.value.urlImage = course.value.courseImages[0].urlImage;\n          }\n\n        } catch (error) {\n          console.log(error);\n        }\n    }\n\n    getCourse();\n\n    return {\n      course,\n      getCourse\n    }\n  },\n  \n  methods:{\n      convertTimeToSeconds(time) {\n        const [minutes, seconds] = time.split(\":\").map(Number);\n        return minutes * 60 + seconds;\n      },\n      convertSecondsToTime(seconds) {\n        const minutes = Math.floor(seconds / 60);\n        const remainingSeconds = seconds % 60;\n        return `${String(minutes).padStart(2, \"0\")}:${String(remainingSeconds).padStart(2, \"0\")}`;\n      },\n\n        //submit order course\n        async submitFormOrderCourse(){\n        try{\n          this.course.id != null ? this.orderData.courseID = this.course.id : 0;\n\n            \n          const res = await axios.post(\"http://localhost:8085/api/order\", this.orderData).then(async (data) => {\n            if(data.status == 200)\n            {\n              this.paymentData.orderID = data.data.data.id;\n              this.course.price != null ? this.paymentData.totalPrice = this.course.price : 0;\n              this.paymentData.paymentMethod = \"Smart Banking Online\";\n                \n              await axios.post(\"http://localhost:8085/api/payment\", this.paymentData).then(async () => {\n                this.orderData.status = \"Đăng ký thành công\";\n\n                await axios.put(\"http://localhost:8085/api/order/\" + data.data.data.id, this.orderData).then(async (response) => {\n                  if(response.status == 200)\n                  {\n                    console.log(\"đăng ký thành công\")\n\n                  }\n                })\n              })\n            }\n          });\n          return res;\n        } catch (error){\n          console.log(error);\n        }\n      },\n    },\n\n    data(){\n      return{\n        paymentData: {\n          orderID: 0,\n          totalPrice: 0,\n          paymentMethod: \"\",\n        },\n        interval: null,\n        countdown: \"00:10\",\n        orderData: {\n          userID: localStorage.getItem('idUser') != null ? localStorage.getItem('idUser') : null,\n          courseID: this.$route.params.id,\n          status: \"Đang xử lý\"\n        },\n        isPopup:false,\n        contents: {\n          title: \"Đăng ký khóa học thành công. Theo dõi khóa học tại trang quản lý của bạn!\",\n          status: true,\n        },\n      }\n    },\n    beforeUnmount() {\n      clearInterval(this.interval); // Clear the interval to prevent memory leaks\n    },\n    components:{\n      PopupScreen\n    }\n  }\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}